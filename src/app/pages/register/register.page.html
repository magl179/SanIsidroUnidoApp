<ion-header no-border>
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-back-button [defaultHref]="backUrl"></ion-back-button>
        </ion-buttons>
        <ion-title>Registro</ion-title>
        <ion-item slot="end" lines="none" detail="false" style="--background: transparent;margin-top: 10px;">
            <img src="assets/img/svg/sanIsidroIconOnlyTransparent.svg" alt="Logo" style="height:50px;width:40px;"/>
        </ion-item>
    </ion-toolbar>
</ion-header>

<ion-content>
    <ion-grid class="grid-container-center">
        <ion-row class="main-row-center">
            <ion-grid>
                <ion-row class="form-register-container">
                    <ion-col size="12">
                        <form [formGroup]="registerForm">
                            <div class="item-form full">
                                <ion-item class="input_item position-relative" lines="none">
                                    <ion-label class="label-padding label-margin" position="stacked">Nombres *
                                    </ion-label>
                                    <ion-input class="input-beatiful" placeholder="John" type="text"
                                        formControlName="first_name" #first_field (keydown.enter)="preventEnterPressed($event)">
                                    </ion-input>
                                    <!-- <div class="validation-icon left" *ngIf="registerForm.get('first_name').valid">
                                        <mat-icon aria-hidden="false" aria-label="Correcto">done</mat-icon>
                                    </div> -->
                                </ion-item>
                            </div>
                            <div class="form-errors padding-lateral">
                                <p class="form-error"
                                    *ngIf="registerForm.get('first_name').hasError('required') && registerForm.get('first_name').touched">
                                    {{errorMessages.first_name.required.message}}
                                </p>
                                <p class="form-error"
                                    *ngIf="registerForm.get('first_name').hasError('minlength') && registerForm.get('first_name').touched">
                                    {{errorMessages.first_name.minlength.message}}
                                </p>
                                <p class="form-error"
                                    *ngIf="registerForm.get('first_name').hasError('maxlength') && registerForm.get('first_name').touched">
                                    {{errorMessages.first_name.maxlength.message}}
                                </p>
                                <p class="form-error"
                                    *ngIf="registerForm.get('first_name').hasError('pattern') && registerForm.get('first_name').touched">
                                    {{errorMessages.first_name.pattern.message}}
                                </p>
                            </div>
                            <div class="item-info">
                                <p>
                                   No se permite símbolos o caracteres especiales
                                </p>
                            </div>                            
                            <div class="item-form full">
                                <ion-item class="input_item position-relative" lines="none">
                                    <ion-label class="label-padding label-margin" position="stacked">Apellidos *
                                    </ion-label>
                                    <ion-input class="input-beatiful" placeholder="Doe" type="text"
                                        formControlName="last_name" (keydown.enter)="preventEnterPressed($event)">
                                    </ion-input>
                                    <!-- <div class="validation-icon left" *ngIf="registerForm.get('last_name').valid">
                                        <mat-icon aria-hidden="false" aria-label="Correcto">done</mat-icon>
                                    </div> -->
                                </ion-item>
                            </div>
                            <div class="form-errors padding-lateral">
                                <p class="form-error"
                                    *ngIf="registerForm.get('last_name').hasError('required') && registerForm.get('last_name').touched">
                                    {{errorMessages.last_name.required.message}}
                                </p>
                                <p class="form-error"
                                    *ngIf="registerForm.get('last_name').hasError('minlength') && registerForm.get('last_name').touched">
                                    {{errorMessages.last_name.minlength.message}}
                                </p>
                                <p class="form-error"
                                    *ngIf="registerForm.get('last_name').hasError('maxlength') && registerForm.get('last_name').touched">
                                    {{errorMessages.last_name.maxlength.message}}
                                </p>
                                <p class="form-error"
                                    *ngIf="registerForm.get('last_name').hasError('pattern') && registerForm.get('last_name').touched">
                                    {{errorMessages.last_name.pattern.message}}
                                </p>
                            </div>
                            <div class="item-info">
                                <p>
                                   No se permite símbolos o caracteres especiales
                                </p>
                            </div> 
                            <div class="item-formcfull">
                                <ion-item class="input_item position-relative" lines="none">
                                    <ion-label class="label-padding label-margin" position="stacked">Correo Electrónico *
                                    </ion-label>
                                    <ion-input class="input-beatiful" placeholder="john@gmail.com" type="text"
                                        formControlName="email" (keydown.enter)="preventEnterPressed($event)">
                                    </ion-input>
                                    <!-- <div class="validation-icon left" *ngIf="registerForm.get('email').valid">
                                        <mat-icon aria-hidden="false" aria-label="Correcto">done</mat-icon>
                                    </div> -->
                                </ion-item>
                            </div>
                            <div class="form-errors padding-lateral">
                                <p class="form-error"
                                    *ngIf="registerForm.get('email').hasError('required') && registerForm.get('email').touched">
                                    {{errorMessages.email.required.message}}
                                </p>
                                <p class="form-error"
                                    *ngIf="registerForm.get('email').hasError('minlength') && registerForm.get('email').touched">
                                    {{errorMessages.email.minlength.message}}
                                </p>
                                <p class="form-error"
                                    *ngIf="registerForm.get('email').hasError('maxlength') && registerForm.get('email').touched">
                                    {{errorMessages.email.maxlength.message}}
                                </p>
                                <p class="form-error"
                                    *ngIf="registerForm.get('email').hasError('pattern') && registerForm.get('email').touched">
                                    {{errorMessages.email.pattern.message}}
                                </p>
                                <p class="form-error"
                                    *ngIf="registerForm.get('email').hasError('email') && registerForm.get('email').touched">
                                    {{errorMessages.email.email.message}}
                                </p>
                            </div>
                            <div class="item-form full">
                                <ion-item class="input_item" lines="none">
                                    <ion-label class="label-padding label-margin" position="stacked">Contraseña *
                                    </ion-label>
                                    <div class="input-container position-relative">
                                        <ion-input class="input-beatiful input_relative" #passwordEyeRegister
                                            [type]="passwordTypeInput" placeholder="********" formControlName="password"
                                            clearOnEdit="false"
                                            (keydown.enter)="preventEnterPressed($event)"
                                            maxlength="100">
                                        </ion-input>
                                        <button item-end class="btn_eye_icon" (click)="togglePasswordMode()" [class.icon-left]="registerForm.get('password').valid">
                                            <ion-icon [name]="(passwordTypeInput === 'text')?'eye-off':'eye'">
                                            </ion-icon>
                                        </button>
                                    </div>
                                </ion-item>
                            </div>
                            <div class="form-errors padding-lateral">
                                <p class="form-error"
                                    *ngIf="registerForm.get('password').hasError('required') && registerForm.get('password').touched">
                                    {{errorMessages.password.required.message}}
                                </p>
                                <p class="form-error"
                                    *ngIf="registerForm.get('password').hasError('minlength') && registerForm.get('password').touched">
                                    {{errorMessages.password.minlength.message}}
                                </p>
                                <p class="form-error"
                                    *ngIf="registerForm.get('password').hasError('maxlength') && registerForm.get('password').touched">
                                    {{errorMessages.password.maxlength.message}}
                                </p>
                                <p class="form-error"
                                    *ngIf="registerForm.get('password').hasError('pattern') && registerForm.get('password').touched">
                                    {{errorMessages.password.pattern.message}}
                                </p>
                            </div>
                            <div class="item-info">
                                <p>
                                    La contraseña debe contener como mínimo 8 caracteres, al menos un dígito, una minúscula y una mayúscula
                                </p>
                            </div>
                            <div class="ion-padding">
                                <ion-button (click)="registerUser()" [disabled]="!registerForm.valid" color="blue-logo"
                                    type="submit" expand="block" class="ion-text-capitalize">
                                    Registrarme</ion-button>
                            </div>
                        </form>
                    </ion-col>
                </ion-row>
                <ion-row>
                    <ion-col size="12">
                        <p class="title_register padding-lateral ion-text-center">Tambien puedes registrarte utilizando
                            tus redes sociales</p>
                    </ion-col>
                </ion-row>
                <ion-row class="padding-lateral ion-justify-content-center">
                    <ion-col size="6">
                        <ion-button class="google-btn-alt" (click)="registerGoogleUser()" color="google-alt"
                            expand="block">
                            <ion-icon slot="icon-only" name="logo-google"></ion-icon>
                        </ion-button>
                    </ion-col>
                    <ion-col size="6">
                        <ion-button class="facebook-btn-alt" (click)="registerFBUser()" color="facebook-alt"
                            expand="block">
                            <ion-icon slot="icon-only" name="logo-facebook"></ion-icon>
                        </ion-button>
                    </ion-col>
                </ion-row>
            </ion-grid>
        </ion-row>
    </ion-grid>
</ion-content>
<ion-footer class="ion-no-border">
    <div class="footer_not_account">
        <p>
            <span>¿Tienes una cuenta?</span>
            <a (click)="goToLogin()">Inicia sesión</a>
        </p>
    </div>
</ion-footer>