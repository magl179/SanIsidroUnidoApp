<ion-header>
    <ion-toolbar color="primary">
        <ion-title class="ion-text-center">Cambiar mi Contraseña</ion-title>
        <ion-buttons slot="end">
            <ion-button (click)="closeModal()">
                <ion-icon slot="icon-only" name="close"></ion-icon>
            </ion-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>

<ion-content padding>
    <div class="container">
        <form [formGroup]="changePassForm">
            <div class="item-form">
                <ion-item class="input_item">
                    <ion-label position="floating">Contraseña</ion-label>
                    <ion-input #passwordEyeChangePass formControlName="password" [type]="passwordTypeInput"></ion-input>
                    <button item-end class="btn_eye_icon" (click)="togglePasswordMode()">
                        <ion-icon [name]="iconpassword"></ion-icon>
                    </button>
                </ion-item>
                <div class="feedback-icon">
                    <ion-item lines="none">
                        <button class="icon-help-input" disabled>
                            <ion-icon name="close-circle" class="error"
                                *ngIf="changePassForm.get('password').touched && changePassForm.get('password').invalid">
                            </ion-icon>
                            <ion-icon name="checkmark-circle" class="success"
                                *ngIf="changePassForm.get('password').touched && changePassForm.get('password').valid">
                            </ion-icon>
                        </button>
                    </ion-item>
                </div>
            </div>
            <div class="form-errors">
                    <p class="form-error"
                        *ngIf="changePassForm.get('password').hasError('required') && changePassForm.get('password').touched">
                        {{errorMessages.password.required.message}}
                    </p>
                </div>
            <div class="item-form">
                <ion-item class="input_item">
                    <ion-label position="floating">Confirma tu Contraseña</ion-label>
                    <ion-input #passwordConfirmEyeChangePass formControlName="confirmPassword" [type]="passwordConfirmTypeInput"></ion-input>
                    <button item-end class="btn_eye_icon" (click)="toggleConfirmPasswordMode()">
                        <ion-icon [name]="iconConfirmpassword"></ion-icon>
                    </button>
                </ion-item>
                <div class="feedback-icon">
                    <ion-item lines="none">
                        <button class="icon-help-input" disabled>
                            <ion-icon name="close-circle" class="error"
                                *ngIf="changePassForm.get('confirmPassword').touched && changePassForm.get('confirmPassword').invalid">
                            </ion-icon>
                            <ion-icon name="checkmark-circle" class="success"
                                *ngIf="changePassForm.get('confirmPassword').touched && changePassForm.get('confirmPassword').valid">
                            </ion-icon>
                        </button>
                    </ion-item>
                </div>
            </div>
            <app-strength-passbar *ngIf="changePassForm.get('confirmPassword').touched" [text]="changePassForm.value.confirmPassword" [width]="90"></app-strength-passbar>
            <div class="form-errors">
                <p class="form-error"
                    *ngIf="changePassForm.get('confirmPassword').hasError('required') && changePassForm.get('confirmPassword').touched">
                    {{errorMessages.confirmPassword.required.message}}
                </p>
                <p class="form-error"
                    *ngIf="changePassForm.get('confirmPassword').hasError('mustMatch') && changePassForm.get('confirmPassword').touched">
                    {{errorMessages.confirmPassword.mustMatch.message}}
                </p>
            </div>
            <ion-button class="btn_change_pass" expand="block" (click)="sendRequestChangePass()" [disabled]="!changePassForm.valid">Guardar</ion-button>
        </form>
    </div>
</ion-content>