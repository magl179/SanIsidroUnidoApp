<app-header-back title="Informe" hrefDefault="/reports"></app-header-back>

<ion-content padding>
    <!-- Mensaje no cargaron los datos desde la Api -->
    <div class="flex-column-center message-fail-load" *ngIf="reportLoaded && !report">
        <p>No se pudo cargar el reporte solicitado</p>
        <ion-button (click)="getReport(null,true)">Toca para reintentar</ion-button>
    </div>
    <!-- Animacion hasta cargar datos -->
    <div *ngIf="!reportLoaded">
        <div class="report-detail animated flash slow infinite">
            <section>
                <h1>
                    <ion-skeleton-text width="30%"></ion-skeleton-text>
                </h1>
            </section>
            <section>
                <h2>
                    <ion-skeleton-text width="100%"></ion-skeleton-text>
                </h2>
                <p class="description-section__content">
                    <ion-skeleton-text width="100%"></ion-skeleton-text>
                    <ion-skeleton-text width="100%"></ion-skeleton-text>
                    <ion-skeleton-text width="100%"></ion-skeleton-text>
                </p>
            </section>
        </div>
    </div>
    <!-- Datos ya cargados -->
    <div *ngIf="reportLoaded && report">
        <div class="report-detail">
            <section class="report-detail__main">
                <h1 class="main-section__title"> {{ report.title }}</h1>
            </section>
            <section class="report-detail__content">
                <p class="report-detail__content__title section-title">Descripción</p>
                <p class="report-detail__content__description">
                    {{report.description | truncate: 50}}
                </p>
            </section>
            <div class="report-detail__map" *ngIf="report.ubication">
                <p class="report-detail__map__title section-title">Ubicación</p>
                <simple-map class="report-detail__map__content" className="report-map" id="report-map-detail-{{id}}"
                    [coordsMap]="report.ubication" [zoom]="16" [enableGesture]="true">
                </simple-map>
            </div>
            <div class="report-detail__images" *ngIf="report.images && report.images.length > 0">
                <p class="report_detail__images__title section-title">Imágenes</p>
                <gallery-image [images]="report.images"></gallery-image>
            </div>
        </div>
    </div>
</ion-content>
