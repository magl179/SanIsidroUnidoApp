<app-header-back title="Emergencia" hrefDefault="/emergencies"></app-header-back>

<ion-content padding>
    <!-- <p>emergency {{ (em)}}</p> -->
    <!-- Mensaje no cargaron los datos desde la Api -->
    <div class="flex-column-center message-fail-load" *ngIf="emergencyLoaded && !emergency">
        <p>No se pudo cargar la emergencia solicitada</p>
        <ion-button (click)="getEmergency()">Toca para reintentar</ion-button>
    </div>
    <!-- Animacion hasta cargar datos -->
    <div *ngIf="!emergencyLoaded">
        <ion-card class="detail-card animated flash slow infinite">
            <ion-card-header>
                <ion-card-subtitle>
                    <ion-skeleton-text width="30%"></ion-skeleton-text>
                </ion-card-subtitle>
                <ion-card-title>
                    <ion-skeleton-text width="10%"></ion-skeleton-text>
                </ion-card-title>
            </ion-card-header>
            <ion-card-content>
                <ion-skeleton-text width="100%"></ion-skeleton-text>
                <ion-skeleton-text width="100%"></ion-skeleton-text>
                <ion-skeleton-text width="100%"></ion-skeleton-text>
            </ion-card-content>
            <div>
                <ion-skeleton-text width="100%" style="height: 200px;"></ion-skeleton-text>
            </div>
            <ion-row>
                <ion-col>
                    <ion-item lines="none" detail="false" button="true"
                        class="container_events detail" [ngClass]="{'active': (i % 2) === 0}">
                        <ion-skeleton-text width="50%"></ion-skeleton-text>
                    </ion-item>
                </ion-col>
                <ion-col>
                    <ion-item lines="none" detail="false" button="true"
                        class="container_events detail" [ngClass]="{'active': (i % 2) !== 0}">
                        <ion-skeleton-text width="50%"></ion-skeleton-text>
                    </ion-item>
                </ion-col>
            </ion-row>
        </ion-card>
    </div>
    <!-- Datos ya cargados -->
    <div *ngIf="emergencyLoaded && emergency">
        <ion-card class="emergency_card detail">
            <img *ngIf="emergency.images.length === 0" class="image-border emergency_cover_image"
                src="assets/img/default/slide-1.png" />
            <img *ngIf="emergency.images.length > 0 " class="image-border emergency_cover_image"
                [src]="getImageURL(emergency.images[0].url)" />
            <ion-card-header class="emergency_card_header">
                <ion-card-subtitle class="emergency_info">
                    <span class="emergency_date">
                        <ion-icon name="calendar"></ion-icon>
                        {{utilsService.getFullDate(emergency.date, emergency.time) | simpleBeatifulDate}}
                    </span>
                    <span class="emergency_address">
                        <ion-icon name="navigate"></ion-icon>
                        {{ emergency.ubication.address || 'Direccion no encontrada'}}
                    </span>
                </ion-card-subtitle>
                <ion-card-title class="emergency_card_title"> {{ emergency.title }}</ion-card-title>
            </ion-card-header>
            <ion-card-content class="emergency_card_content">
                <p class="post_description">
                    {{emergency.description | truncate: 50}}
                </p>
            </ion-card-content>
        </ion-card>
    </div>

</ion-content>
