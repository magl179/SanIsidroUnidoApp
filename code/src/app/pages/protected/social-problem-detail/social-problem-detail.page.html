<app-header-back title="Problema Social" hrefDefault="/social-problems"></app-header-back>

<ion-content padding>
    <app-network-banner *ngIf="!appNetworkConnection" networkConnection="appNetworkConnection"></app-network-banner>
    <div *ngIf="appNetworkConnection">
        <div *ngIf="socialProblem === null">
            <ion-card class="card_social detail-card animated flash slow infinite">
                <ion-skeleton-text animated style="width: 80%" style="height: 300px;"></ion-skeleton-text>
                <ion-card-header>
                    <ion-card-title>
                        <ion-skeleton-text animated style="width: 40%"></ion-skeleton-text>
                    </ion-card-title>
                    <ion-card-subtitle class="post_user">
                        <ion-skeleton-text animated style="width: 40%"></ion-skeleton-text>
                    </ion-card-subtitle>
                    <ion-card-subtitle>
                        <ion-skeleton-text animated style="width: 50%"></ion-skeleton-text>
                    </ion-card-subtitle>
                </ion-card-header>
                <ion-card-content class="post_description">
                    <p class="post_content">
                        <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
                        <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
                        <ion-skeleton-text animated style="width: 80%"></ion-skeleton-text>
                    </p>
                </ion-card-content>
                <div class="options detail">
                    <div class="option_actions">
                        <div class="btn_icon" style="width: 50%;height: 30px;">
                            <ion-skeleton-text width="100%"></ion-skeleton-text>
                        </div>
                        <div class="btn_icon" style="width: 50%;height: 30px;">
                            <ion-skeleton-text width="100%"></ion-skeleton-text>
                        </div>
                    </div>
                </div>
            </ion-card>
        </div>
        <ion-card class="card_social detail-card" *ngIf="socialProblem !== null">
            <img *ngIf="socialProblem.images.length === 0" style="border: 1px solid #ccc;"
                src="assets/img/default/slide-1.png" />
            <img *ngIf="socialProblem.images.length > 0 " style="border: 1px solid #ccc;"
                [src]="getImageURL(socialProblem.images[0].url)" />
            <ion-card-header>
                <ion-card-subtitle class="post_user problem-subtitle" *ngIf="socialProblem">
                    <span> {{socialProblem.user.firstname}} {{socialProblem.user.lastname}}</span>
                    <span>{{socialProblem.date | beafitulDate}}</span>
                </ion-card-subtitle>
                <ion-card-title>Problem {{idPost}}</ion-card-title>
            </ion-card-header>
            <ion-card-content>
                <p class="post_description">
                    {{socialProblem.description}}
                </p>
                <p class="post-num-likes">{{socialProblem.details.length}} me gusta</p>
            </ion-card-content>
            <div class="action-buttons detail">
                <div class="action-button pair">
                    <div class="btn-like" [ngClass]="{'active': (checkLikePost(socialProblem.details))}"
                        (click)="toggleLike((checkLikePost(socialProblem.details)))">
                        <ion-icon slot="icon-only" class="icon-like"
                            [name]="(checkLikePost(socialProblem.details))?'heart':'heart-empty'"></ion-icon>
                    </div>
                    <div class="btn-share" (click)="sharePost(socialProblem)">
                        <ion-icon class="icon-share" slot="icon-only" name="share"></ion-icon>
                    </div>
                </div>
                <div class="action-button">
                    <div class="btn-more">
                        <ion-icon class="icon-more" slot="icon-only" name="more"></ion-icon>
                    </div>
                </div>
            </div>
        </ion-card>
    </div>
</ion-content>