<app-header-back title="Evento" hrefDefault="/events"></app-header-back>

<ion-content padding>
    <!-- <app-network-banner *ngIf="!appNetworkConnection" networkConnection="appNetworkConnection"></app-network-banner> -->
    <ng-container>
        <ion-card class="detail-card animated flash slow infinite" *ngIf="!event">
            <ion-card-header>
                <ion-card-subtitle>
                    <ion-skeleton-text width="30%"></ion-skeleton-text>
                </ion-card-subtitle>
                <ion-card-title>
                    <ion-skeleton-text width="10%"></ion-skeleton-text>
                </ion-card-title>
            </ion-card-header>
            <ion-card-content>
                <ion-skeleton-text width="100%"></ion-skeleton-text>
                <ion-skeleton-text width="100%"></ion-skeleton-text>
                <ion-skeleton-text width="100%"></ion-skeleton-text>
            </ion-card-content>
            <div>
                <ion-skeleton-text width="100%" style="height: 200px;"></ion-skeleton-text>
            </div>
            <ion-row>
                <ion-col>
                    <ion-item lines="none" detail="false" button="true"
                        class="container_events detail" [ngClass]="{'active': (i % 2) === 0}">
                        <!-- <ion-icon slot="start" name="star" (click)="test()"></ion-icon> -->
                        <ion-skeleton-text width="50%"></ion-skeleton-text>
                    </ion-item>
                </ion-col>
                <ion-col>
                    <ion-item lines="none" detail="false" button="true"
                        class="container_events detail" [ngClass]="{'active': (i % 2) !== 0}">
                        <ion-skeleton-text width="50%"></ion-skeleton-text>
                    </ion-item>
                </ion-col>
            </ion-row>
        </ion-card>
        <ion-card class="event_card detail" *ngIf="event">
            <ion-card-header class="event_card_header">
                <ion-card-subtitle class="event_info">
                    <!-- <p class="post-fulldate">
                        <ion-icon class="icon" name="calendar"></ion-icon>
                        <span>{{getFullDate(event.date, event.time) | simpleBeatifulDate}}</span>
                    </p>
                    <p class="post-ubication-address flex-right" *ngIf="event.ubication">
                        <ion-icon class="icon" name="navigate"></ion-icon>
                        <span>{{ event.ubication.address || 'Direccion no encontrada'}}</span>
                    </p> -->
                    <span class="event_date">
                        <ion-icon name="calendar"></ion-icon>
                        {{getFullDate(event.date, event.time) | simpleBeatifulDate}}
                    </span>
                    <span class="event_address">
                        <ion-icon name="navigate"></ion-icon>
                        {{ event.ubication.address || 'Direccion no encontrada'}}
                    </span>
                </ion-card-subtitle>
                <ion-card-title class="event_card_title">{{event.title}}</ion-card-title>
            </ion-card-header>
            <ion-card-content class="emergency_card_content">
                <p class="post-description"> {{event.description | truncate: 50}}</p>
                <p class="count_assistants">
                    <ion-icon class="icon_assistant" name="people"></ion-icon>
                    {{event.details.length}} {{(event.details.length !== 1) ? 'personas asistirán': 'persona asistirá'}}
                </p>
            </ion-card-content>
            <div class="" style="margin-bottom:1rem;">
                <p class="image_gallery_title">Ubicación</p>
                <simple-map classMap="event-map-detail map-center" idMap="eventMap-detail-{{id}}"
                    [coordsMap]="mapPoints" [zoom]="16">
                </simple-map>
                <!-- <p class="post-num-likes">{{event.details.length}}
                    {{(event.details.length !== 1) ? 'personas asistirán': 'persona asistirá'}}</p> -->
            </div>
            <div class="image_gallery_container" *ngIf="event.images && event.images.length > 0">
                <p class="image_gallery_title">Imágenes</p>
                <div class="image_gallery">
                    <figure *ngFor="let image of event.images">
                        <img [src]="(image.url) ? getImageURL(image.url) : 'assets/img/default/img_avatar.png'"
                            alt="Imagen de la Publicación">
                        <!-- <figcaption>
                      Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua
                    </figcaption> -->
                    </figure>
                </div>
            </div>
            <!-- <div class="action-buttons detail">
                <div class="action-button pair">
                    <div class="btn-like" (click)="toggleAssistance(postLiked)">
                        <ion-icon slot="icon-only" class="icon-like"
                            [name]="(postLiked)?'body':'man'"></ion-icon>
                    </div>
                    <div class="btn-share" (click)="sharePost(event)">
                        <ion-icon class="icon-share" slot="icon-only" name="share"></ion-icon>
                    </div>
                </div>
            </div> -->
            <div class="event_card_footer">
                <div class="post_assistants">
                    <ion-button class="btn-assistant" color="primary"
                    (click)="toggleAssistance(postLiked)">
                        Asistiré
                        <ion-icon slot="start" class="icon-assistant"
                        [name]="(postLiked)?'body':'man'"></ion-icon>
                    </ion-button>
                </div>
                <div class="post_options">

                    <div class="btn-share" (click)="sharePost(event)">
                        <ion-icon class="icon-share" slot="icon-only" name="share"></ion-icon>
                    </div>
                </div>
            </div>
        </ion-card>
    </ng-container>
</ion-content>
